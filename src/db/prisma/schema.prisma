generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["driverAdapters"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Job {
  id             String          @id @default(uuid()) @db.Uuid
  data           Json            @default("{}")
  status         OperationStatus @default(PENDING)
  percentage     Int             @default(0)
  creation_time  DateTime        @default(now())
  update_time    DateTime?       @updatedAt // make it mandatory after CRUD implementation
  expirationTime DateTime?       @map("expiration_time")
  type           JobMode         @default(PRE_DEFINED)
  userMetadata   Json            @default("{}")
  priority       Priority        @default(VERY_LOW)
  creator        Creator         @default(UNKNOWN)
  TTL            DateTime?
  notifications  Json?
  name           Name            @default(DEFAULT)

  @@map("job")
}

enum OperationStatus {
  PENDING              @map("Pending")
  IN_PROGRESS          @map("In-Progress")
  COMPLETED            @map("Completed")
  FAILED               @map("Failed")
  ABORTED              @map("Aborted")
  WAITING              @map("Waiting")
  WAITING_FOR_APPROVAL @map("Waiting-For-Approval")
  PAUSED               @map("Paused")

  @@map("operation_status_enum")
}

enum Priority {
  VERY_HIGH @map("Very-High")
  HIGH      @map("High")
  MEDIUM    @map("Medium")
  LOW       @map("Low")
  VERY_LOW  @map("Very-Low")

  @@map("priority_enum")
}

enum JobMode {
  PRE_DEFINED @map("Pre-Defined")
  DYNAMIC     @map("Dynamic")

  @@map("job_mode_enum")
}

enum Creator {
  MAP_COLONIES @map("Map-Colonies")
  UNKNOWN      @map("Unknown")

  @@map("creator")
}

enum Name {
  INGESTION @map("Ingestion")
  EXPORT    @map("Export")
  DEFAULT   @map("Default")

  @@map("name")
}
